(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1793],{22226:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/construction-material-prices/prices-building-materials",function(){return a(81228)}])},95810:function(e,t,a){"use strict";a.d(t,{Z:function(){return m}});var n=a(85893),l=a(87462),r=a(67294),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},o=a(42135),c=r.forwardRef(function(e,t){return r.createElement(o.Z,(0,l.Z)({},e,{ref:t,icon:i}))}),s=a(14726),u=a(41664),d=a.n(u),m=function(e){let{url:t,query:a={}}=e;return(0,n.jsx)(d(),{href:t,className:"d-flex mx-auto",style:{width:"fit-content"},children:(0,n.jsx)(s.ZP,{type:"primary",size:"large",className:"d-flex mx-auto align-items-center btn-continue",children:(0,n.jsx)(c,{})})})}},30014:function(e,t,a){"use strict";var n=a(85893),l=a(8393),r=a(30810),i=a(67294);t.Z=function(e){let{columns:t,dataSource:a,className:o,virtual:c=!1,scroll:s={x:"max-content",y:500}}=e,{isFetchLoading:u}=(0,i.useContext)(l.U);return(0,n.jsxs)("div",{className:"custom__table",children:[(null==a?void 0:a.length)>0&&(0,n.jsx)(r.default,{virtual:c,className:o,columns:t,dataSource:a,loading:u,tableLayout:"auto",pagination:!1,expandable:{defaultExpandAllRows:!0},scroll:s}),!(null==a?void 0:a.length)>0&&(0,n.jsx)(r.default,{columns:t,className:o,loading:u,dataSource:[],tableLayout:"auto",pagination:!1,expandable:{defaultExpandAllRows:!0},scroll:s})]})}},86356:function(e,t,a){"use strict";var n=a(85893),l=a(84043),r=a(78957),i=a(97280),o=a(75081),c=a(14726),s=a(67294),u=a(11163),d=a(57972);t.Z=function(e){let{typeFile:t=[],IndexType:a,fileNameReport:m,urlMenu:p}=e,f=(0,u.useRouter)(),[h,y]=(0,s.useState)(!1),{pathname:x}=f,v=x.split("/")[1],g=x.split("/")[2],N=(0,s.useMemo)(()=>{let e=t;return"string"==typeof e&&(e=[e]),e},[t]),w=async(e,t)=>{try{y(!0),await Promise.all([d.S("",e,t,m)])}catch(e){console.error("E_fetchDataTab2",e)}finally{y(!1)}},_={"escalation-factors":{type:"K",fileName:"K"},"materials-price-index":{type:"CPA",fileName:"Cmi"},"producer-price-index":{type:a,fileName:"PPI"},rfti:{type:a,fileName:"Rfti"},"export-Import-price":{type:a,fileName:"IMEX"},cpip:{type:a,fileName:"CPIP"},"construction-material-prices":{type:a,fileName:"CmiPrice"},cpi:{type:a,fileName:m}},b=async e=>{try{let e=_[v];if(e){if("list-construction-materials"===g||"prices-building-materials"===g){var t,a;t="https://www.price.moc.go.th/price/fileuploader/file_csi/".concat(e.type),(a=document.createElement("a")).href=t,a.target="_blank",a.download=t.substring(t.lastIndexOf("/")+1),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}else await w(e.fileName,{type:e.type})}}catch(e){console.error("E_handleSearch",e)}},j=async e=>{try{window.location.href=e}catch(e){console.error("E_handleSearch",e)}};return(0,n.jsxs)(r.Z,{size:10,children:[(0,n.jsx)(i.Z,{className:"download_file_loading",centered:!0,open:h,footer:null,width:400,children:(0,n.jsxs)("div",{style:{height:200,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"2rem"},children:[(0,n.jsx)(o.Z,{size:"large"}),(0,n.jsx)("span",{style:{fontSize:16},children:"เธเธณเธฅเธฑเธเธ”เธฒเธงเธเนเนเธซเธฅเธ”เนเธเธฅเน..."})]})}),null==N?void 0:N.map((e,t)=>e?"excel"==e||"pdf"==e?(0,n.jsx)(c.ZP,{type:"ghost",onClick:e=>{b(e)},ghost:!0,datatype:t,icon:l.gB[e]},t):"chart"==e?(0,n.jsx)(c.ZP,{type:"ghost",onClick:()=>{j(p)},ghost:!0,datatype:t,icon:l.gB[e]},t):void 0:null)]})}},81228:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSG:function(){return v},default:function(){return g}});var n=a(85893);a(9008);var l=a(67294);a(41664);var r=a(18947),i=a(67421),o=a(18370);a(97221),a(37683),a(51541),a(49973),a(90962);var c=a(7615),s=a(69995);let u=async()=>{var e;let t=await s.D.get("/api/imex/master"),a=null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.map(e=>({value:e.commodityCode,label_th:e.commodityNameTH,label_en:e.commodityNameEN||"เนเธกเนเธเนเธญเธกเธนเธฅ",label:"เนเธกเนเธเนเธญเธกเธนเธฅ"}));return a};var d=a(47926),m=a(7751),p=a(28799),f=a(8393);a(86356);var h=a(30014),y=a(95810);let x={};var v=!0;function g(){let{t:e}=(0,i.$G)("constructionMaterialPrices"),{onToggleFetchLoading:t}=(0,l.useContext)(f.U),[a,s]=(0,l.useState)([]),[v,g]=(0,l.useState)([]),[N,w]=(0,l.useState)(x),[_,b]=(0,l.useState)([]),j=[{title:e("common:table.listProvinces"),dataIndex:"name",render:e=>(0,n.jsx)("span",{"data-table-name":e,children:e})},{title:"เธ”เธนเธฃเธฒเธขเธฅเธฐเน€เธญเธตเธขเธ”เธฃเธฒเธเธฒ",dataIndex:"url",render:(e,t)=>(0,n.jsx)(y.Z,{url:e})}];(0,l.useEffect)(()=>{S(),E()},[]);let S=async()=>{try{t(!0);let[e]=await Promise.all([c.U2()]);s(e),b(e)}catch(e){console.error("E_fetchData",e)}finally{t(!1)}},E=async()=>{try{let[e]=await Promise.all([u()]);g(e)}catch(e){console.error("E_fetchDataFilter",e)}},[Z,C]=(0,l.useState)(""),[P,D]=(0,l.useState)(null);return(0,n.jsx)("div",{children:(0,n.jsx)(r.Z,{children:(0,n.jsx)("div",{className:"tpso-container-box",children:(0,n.jsxs)("div",{className:"tpso-container-fluid",children:[(0,n.jsx)(p.Z,{}),(0,n.jsx)(m.Z,{children:(0,n.jsxs)(d.Z,{isShowBtnDownload:!1,children:[(0,n.jsx)(o.Z,{placeholder:"เธเนเธเธซเธฒเธเธฑเธเธซเธงเธฑเธ”...",value:Z,className:"w-25 mb-4 mt-4 ms-4",onChange:e=>{clearTimeout(P);let t=setTimeout(()=>{let t=_.filter(t=>t.name.includes(e.target.value));s(t)},500);D(t),C(e.target.value)}}),(0,n.jsx)("h6",{className:"mb-4 ms-4 text-title ",children:"เธซเธกเธฒเธขเน€เธซเธ•เธธ : เธชเนเธงเธเธเธฅเธฒเธเธฃเธงเธก เธเธฃเธธเธเน€เธ—เธเธฏ เธเธเธ—เธเธธเธฃเธต เธเธ—เธธเธกเธเธฒเธเธต เธชเธกเธธเธ—เธฃเธเธฃเธฒเธเธฒเธฃ"}),(0,n.jsx)(h.Z,{columns:j,dataSource:a})]})})]})})})})}},7615:function(e,t,a){"use strict";a.d(t,{Ko:function(){return s},U2:function(){return o},ol:function(){return c},sp:function(){return i},vG:function(){return u}}),a(49976);var n=a(69995),l=a(57632);let r=a(27484),i=async(e,t)=>{let a={provinceCode:"".concat(t),year:parseInt(r((null==e?void 0:e.date)||"").format("BBBB")),month:null},i=await n.D.post("/api/CsiNote/Search",a),o=i.data.map(e=>({key:(0,l.Z)(),name:e.noteKey,url:"/construction-material-prices/prices-building-materials/".concat(e.provinceCode),typeFile:"pdf",updatedAt:e.createdAt,IndexType:e.fileName,provinceName:e.provinceName,timeEdit:"".concat(r().set("month",e.monthEdit-1).format("MMMM")," ").concat(e.yearEdit),timeNote:"".concat(r(e.timeSign.split("T")[0]).format("DD MMMM YYYY"))}));function c(e){let t=e.split(" "),a=t[0],n={เธกเธเธฃเธฒเธเธก:"01",เธเธธเธกเธ เธฒเธเธฑเธเธเน:"02",เธกเธตเธเธฒเธเธก:"03",เน€เธกเธฉเธฒเธขเธ:"04",เธเธคเธฉเธ เธฒเธเธก:"05",เธกเธดเธ–เธธเธเธฒเธขเธ:"06",เธเธฃเธเธเธฒเธเธก:"07",เธชเธดเธเธซเธฒเธเธก:"08",เธเธฑเธเธขเธฒเธขเธ:"09",เธ•เธธเธฅเธฒเธเธก:"10",เธเธคเธจเธเธดเธเธฒเธขเธ:"11",เธเธฑเธเธงเธฒเธเธก:"12"}[t[1]],l=parseInt(t[2],10)-543;return new Date("".concat(l,"-").concat(n,"-").concat(a))}return o.sort((e,t)=>{let a=c(e.timeNote),n=c(t.timeNote);return n-a}),o},o=async()=>{let e=await n.D.get("/api/cmip/master"),t=e.data.types.map(e=>({key:(0,l.Z)(),name:e.typeName,url:"/construction-material-prices/prices-building-materials/".concat(e.type),typeFile:"excel",updatedAt:"21 เธ.เธ. 2565",IndexType:e.type}));return t},c=async e=>{let t=await n.D.post("/api/cmip/search",{Keyword:" "}),a=t.data.map(e=>({value:e.commodityCode,label:e.commodityNameTH}));return a},s=()=>[{key:1,label:"เธเธญเนเธเนเนเธเธเธฒเธฃเน€เธเธขเนเธเธฃเน เน€เธ”เธทเธญเธเธกเธเธฃเธฒเธเธก 2565",url:"/file/ccs_q_012566.pdf"},{key:2,label:"เธเธญเนเธเนเนเธเธเธฒเธฃเน€เธเธขเนเธเธฃเน เน€เธ”เธทเธญเธเธกเธเธฃเธฒเธเธก 2566",url:"/file/ccs_q_012566.pdf"}],u=async(e,t)=>{var a;let i;await n.D.get("/api/cmip/master");let o=e=>r(e).format("BBBB"),c=e=>r(e).format("M"),{subPeriod:s,date:u,category:d,period:m,yearBase:p,check:f,search:h}=e,y=(u&&u.length,((e,t)=>{let a={StartYear:o(t),StartMonth:"month"===e?c(t):1,EndYear:o(t),EndMonth:"month"===e?c(t):12};return a})(s,u)),x={YearBase:p||2558,Categories:[],Search:h,Types:["".concat(t)],HeadCategories:("string"==typeof d?[d]:d)||[]};"period"!==m&&m||(x.TimeOption=!0,x.Period=y),"long-term"===m&&(x.TimeOption=!1,x.SpecificTimes=(f||[]).flatMap(e=>{let t=e.split("-");if(2===t.length)return[[parseInt(t[0],10),parseInt(t[1],10)]];{let e=[];for(let a=1;a<=12;a++)e.push([parseInt(t[0],10),a]);return e}}));let v=(a=(await n.D.post("/api/cmip/filter",x)).data,i=[],a.forEach(e=>{let{commodityNameTH:t,years:a,commodityCode:n,unitName:r,headCategory:o,headCategoryName:c}=e;a.forEach(e=>{let{year:a,months:s}=e,u=Array.from({length:12},(e,t)=>{let a=s.find(e=>e.month===t+1);return a?a.priceCur:"-"}),d={key:(0,l.Z)(),headCategory:o,headCategoryName:c,code:n,name:t,year:a,unitName:null!=r?r:"-",...u.reduce((e,t,a)=>{let n="-"!==t?function(e){let t=parseFloat(e),a=t.toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2});return a}(t):t;return{...e,["month".concat(a+1)]:n}},{}),avg:u[11],columns:"quarter"};i.push(d)})}),i);return v.sort((e,t)=>t.year-e.year),v}},90962:function(e,t,a){"use strict";var n=a(85893),l=a(78045),r=a(67294),i=a(67421);t.Z=e=>{let{options:t=[],value:a=null,defaultValue:o="",onChange:c=()=>{}}=e,{t:s}=(0,i.$G)(),[u,d]=(0,r.useState)("");return(0,n.jsx)(l.ZP.Group,{className:"d-flex flex-column",defaultValue:o,value:null!=a?a:u,onChange:e=>{let a=e.target.value,n=t.find(e=>e.value===a);d(a),c(a,(null==n?void 0:n.label_th)||(null==n?void 0:n.label_en)||(null==n?void 0:n.label))},children:t.map((e,t)=>(0,n.jsx)(l.ZP,{value:e.value,children:e.translate?s(e.translate):e.label},t))})}}},function(e){e.O(0,[3662,865,3419,810,5197,7221,5614,8833,7926,1227,9774,2888,179],function(){return e(e.s=22226)}),_N_E=e.O()}]);
