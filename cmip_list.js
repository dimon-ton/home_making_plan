(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7504],{30504:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/construction-material-prices/list-construction-materials",function(){return a(68372)}])},95810:function(e,t,a){"use strict";a.d(t,{Z:function(){return p}});var n=a(85893),l=a(87462),r=a(67294),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},o=a(42135),c=r.forwardRef(function(e,t){return r.createElement(o.Z,(0,l.Z)({},e,{ref:t,icon:i}))}),s=a(14726),d=a(41664),u=a.n(d),p=function(e){let{url:t,query:a={}}=e;return(0,n.jsx)(u(),{href:t,className:"d-flex mx-auto",style:{width:"fit-content"},children:(0,n.jsx)(s.ZP,{type:"primary",size:"large",className:"d-flex mx-auto align-items-center btn-continue",children:(0,n.jsx)(c,{})})})}},30014:function(e,t,a){"use strict";var n=a(85893),l=a(8393),r=a(30810),i=a(67294);t.Z=function(e){let{columns:t,dataSource:a,className:o,virtual:c=!1,scroll:s={x:"max-content",y:500}}=e,{isFetchLoading:d}=(0,i.useContext)(l.U);return(0,n.jsxs)("div",{className:"custom__table",children:[(null==a?void 0:a.length)>0&&(0,n.jsx)(r.default,{virtual:c,className:o,columns:t,dataSource:a,loading:d,tableLayout:"auto",pagination:!1,expandable:{defaultExpandAllRows:!0},scroll:s}),!(null==a?void 0:a.length)>0&&(0,n.jsx)(r.default,{columns:t,className:o,loading:d,dataSource:[],tableLayout:"auto",pagination:!1,expandable:{defaultExpandAllRows:!0},scroll:s})]})}},86356:function(e,t,a){"use strict";var n=a(85893),l=a(84043),r=a(78957),i=a(97280),o=a(75081),c=a(14726),s=a(67294),d=a(11163),u=a(57972);t.Z=function(e){let{typeFile:t=[],IndexType:a,fileNameReport:p,urlMenu:f}=e,h=(0,d.useRouter)(),[m,y]=(0,s.useState)(!1),{pathname:x}=h,v=x.split("/")[1],g=x.split("/")[2],w=(0,s.useMemo)(()=>{let e=t;return"string"==typeof e&&(e=[e]),e},[t]),N=async(e,t)=>{try{y(!0),await Promise.all([u.S("",e,t,p)])}catch(e){console.error("E_fetchDataTab2",e)}finally{y(!1)}},j={"escalation-factors":{type:"K",fileName:"K"},"materials-price-index":{type:"CPA",fileName:"Cmi"},"producer-price-index":{type:a,fileName:"PPI"},rfti:{type:a,fileName:"Rfti"},"export-Import-price":{type:a,fileName:"IMEX"},cpip:{type:a,fileName:"CPIP"},"construction-material-prices":{type:a,fileName:"CmiPrice"},cpi:{type:a,fileName:p}},_=async e=>{try{let e=j[v];if(e){if("list-construction-materials"===g||"prices-building-materials"===g){var t,a;t="https://www.price.moc.go.th/price/fileuploader/file_csi/".concat(e.type),(a=document.createElement("a")).href=t,a.target="_blank",a.download=t.substring(t.lastIndexOf("/")+1),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}else await N(e.fileName,{type:e.type})}}catch(e){console.error("E_handleSearch",e)}},b=async e=>{try{window.location.href=e}catch(e){console.error("E_handleSearch",e)}};return(0,n.jsxs)(r.Z,{size:10,children:[(0,n.jsx)(i.Z,{className:"download_file_loading",centered:!0,open:m,footer:null,width:400,children:(0,n.jsxs)("div",{style:{height:200,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"2rem"},children:[(0,n.jsx)(o.Z,{size:"large"}),(0,n.jsx)("span",{style:{fontSize:16},children:"เธเธณเธฅเธฑเธเธ”เธฒเธงเธเนเนเธซเธฅเธ”เนเธเธฅเน..."})]})}),null==w?void 0:w.map((e,t)=>e?"excel"==e||"pdf"==e?(0,n.jsx)(c.ZP,{type:"ghost",onClick:e=>{_(e)},ghost:!0,datatype:t,icon:l.gB[e]},t):"chart"==e?(0,n.jsx)(c.ZP,{type:"ghost",onClick:()=>{b(f)},ghost:!0,datatype:t,icon:l.gB[e]},t):void 0:null)]})}},68372:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSG:function(){return _},default:function(){return b}});var n=a(85893);a(9008);var l=a(67294);a(41664);var r=a(18947),i=a(67421),o=a(34041);a(97221);var c=a(37683),s=a(51541);a(49973),a(90962);var d=a(71745),u=a(65827),p=a(69995);let f=async()=>{let e=await p.D.get("/api/cmip/master"),t=function(e){let t=[],a=e=>{t.push({value:e.type,label:e.typeName})};return e.forEach(e=>a(e)),t}(e.data.types);return t};var h=a(28799),m=a(7751),y=a(47926),x=a(8393),v=a(86356),g=a(30014),w=a(95810);let N=a(27484),j={1:{period:"period",subPeriod:"month",date:N(),check:[],category:null,dataView:"index",yearBase:0}};var _=!0;function b(){var e;let{t}=(0,i.$G)("constructionMaterialPrices"),{onToggleFetchLoading:a}=(0,l.useContext)(x.U),[N,_]=(0,l.useState)([]),[b,C]=(0,l.useState)([]),[Z,E]=(0,l.useState)(j),[P,Y]=(0,l.useState)({category:[],provinces:[]}),S=[{title:t("common:table.announcement"),dataIndex:"name",render:e=>(0,n.jsx)("span",{"data-table-name":e,children:e})},{title:"เธเธทเนเธญเธเธฑเธเธซเธงเธฑเธ”",dataIndex:"provinceName",align:"left"},{title:"เน€เธ”เธทเธญเธ/เธเธต เธ—เธตเนเนเธเนเนเธเธเนเธญเธกเธนเธฅ",dataIndex:"timeEdit",align:"left"},{title:"เธงเธฑเธ/เน€เธ”เธทเธญเธ/เธเธต เธ—เธตเนเนเธเนเธเธเธฃเธฐเธเธฒเธจ",dataIndex:"timeNote",align:"left"},{title:"เธ”เธฒเธงเนเธซเธฅเธ”เธเนเธญเธกเธนเธฅ",dataIndex:"typeFile",render:(e,t)=>(0,n.jsx)(v.Z,{typeFile:e,IndexType:t.IndexType})},{title:"เธ”เธนเธฃเธฒเธขเธฅเธฐเน€เธญเธตเธขเธ”เธฃเธฒเธเธฒ",dataIndex:"url",render:(e,t)=>(0,n.jsx)(w.Z,{url:e,query:{pageTitle:t.name}})}];(0,l.useEffect)(()=>{p.D.post("/api/stat/PageCount",{title:"PRICE"}),I(),M()},[]);let I=async e=>{try{a(!0);let[t]=await Promise.all([u.U(e)]);_(t)}catch(e){console.error("E_fetchData",e)}finally{a(!1)}},M=async()=>{try{let[e]=await Promise.all([f()]);Y(t=>({...t,category:e})),C(e)}catch(e){console.error("E_fetchDataFilter",e)}},D=(e,t)=>{try{E(a=>({...a,1:{...a[1],[e]:t}}))}catch(e){console.error("E_handelChangeFilter",e)}},k=async()=>{try{a(!0),await I(Z[1])}catch(e){console.error("E_handleSearch",e)}finally{a(!1)}};return(0,n.jsx)("div",{children:(0,n.jsx)(r.Z,{children:(0,n.jsx)("div",{className:"tpso-container-box",children:(0,n.jsxs)("div",{className:"tpso-container-fluid",children:[(0,n.jsx)(h.Z,{}),(0,n.jsxs)(m.Z,{children:[(0,n.jsxs)(c.Z,{onSearch:k,onReset:()=>{try{E(e=>({...e,[tab]:j[tab]}))}catch(e){console.error("E_handleReset",e)}},children:[(0,n.jsx)(s.Z,{title:t("filter:period"),isCollapse:!1,children:(0,n.jsx)(d.Z,{type:"year",onChange:e=>D("date",e)})}),(0,n.jsx)(s.Z,{title:t("filter:province"),subtitle:"(เน€เธฅเธทเธญเธเนเธ”เนเน€เธเธตเธขเธ 1 เธเธธเธ”เธเนเธญเธกเธนเธฅ)",children:(0,n.jsx)(o.default,{showSearch:!0,className:"w-100",placeholder:"เธเนเธเธซเธฒเธเธฑเธเธซเธงเธฑเธ”...",optionFilterProp:"children",onChange:e=>D("category",e),onSearch:e=>{console.log("search:",e)},filterOption:(t,a)=>(null!==(e=null==a?void 0:a.label)&&void 0!==e?e:"").toLowerCase().includes(t.toLowerCase()),options:P.category})})]}),(0,n.jsx)(y.Z,{isShowBtnDownload:!1,isNote:!0,children:(0,n.jsx)(g.Z,{columns:S,dataSource:N})})]})]})})})})}},65827:function(e,t,a){"use strict";a.d(t,{K:function(){return o},U:function(){return i}});var n=a(69995),l=a(57632);let r=a(27484),i=async e=>{var t;let a;let i={provinceCode:(null==e?void 0:e.category)||null,year:parseInt((t=(null==e?void 0:e.date)||r(),r(t).format("BBBB"))),month:null};a=void 0===e?await n.D.get("/api/CsiNote"):await n.D.post("/api/CsiNote/Search",i);let o=a.data.map(e=>({key:(0,l.Z)(),name:e.noteKey,url:"/construction-material-prices/prices-building-materials/".concat(e.provinceCode,"?tabac=2"),typeFile:"pdf",updatedAt:e.createdAt,IndexType:e.fileName,provinceName:e.provinceName,timeEdit:"".concat(r().set("month",e.monthEdit-1).format("MMMM")," ").concat(e.yearEdit),timeNote:"".concat(r(e.timeSign.split("T")[0]).format("DD MMMM YYYY"))}));return o},o=()=>"/file/ccs_q_012566.pdf"},71745:function(e,t,a){"use strict";var n=a(85893),l=a(67294),r=a(35227),i=a(5152),o=a.n(i),c=a(27484),s=a.n(c),d=a(67421);let u=e=>{let{type:t="month",value:a,onChange:i=()=>{},Datedisabled:o="",MinDatedisabled:c=""}=e,{t:u}=(0,d.$G)(),p={month:u("filter:datePicker.month"),quarter:u("filter:datePicker.quarter"),year:u("filter:datePicker.year")};return(0,n.jsx)(l.Fragment,{children:(0,n.jsx)(r.default,{size:"large",picker:t,defaultValue:s()(),className:"w-100",value:a,onChange:i,format:{month:"MMM YYYY",quarter:"๏ผฑQ YYYY",year:"YYYY"}[t],placeholder:"เน€เธฅเธทเธญเธ ".concat(p[t]),disabledDate:function(e){let a="month";["year","quarter","month"].includes(t)&&(a=t);let n=c?s()(c,"M/DD/YYYY").startOf(a):null,l=o?s()(o,"M/DD/YYYY").endOf(a):null;return null!=l&&e>l||null!=n&&e<n}})})};t.Z=o()(()=>Promise.resolve(u),{ssr:!1})},90962:function(e,t,a){"use strict";var n=a(85893),l=a(78045),r=a(67294),i=a(67421);t.Z=e=>{let{options:t=[],value:a=null,defaultValue:o="",onChange:c=()=>{}}=e,{t:s}=(0,i.$G)(),[d,u]=(0,r.useState)("");return(0,n.jsx)(l.ZP.Group,{className:"d-flex flex-column",defaultValue:o,value:null!=a?a:d,onChange:e=>{let a=e.target.value,n=t.find(e=>e.value===a);u(a),c(a,(null==n?void 0:n.label_th)||(null==n?void 0:n.label_en)||(null==n?void 0:n.label))},children:t.map((e,t)=>(0,n.jsx)(l.ZP,{value:e.value,children:e.translate?s(e.translate):e.label},t))})}}},function(e){e.O(0,[3662,865,3419,810,5197,7221,5614,8833,7926,1227,9774,2888,179],function(){return e(e.s=30504)}),_N_E=e.O()}]);
